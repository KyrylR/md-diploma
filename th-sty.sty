% th-sty.sty - Custom styles for thesis document

% --- Package Dependencies ---
% Ensure necessary packages are loaded. These should also be loaded in the main .tex file.
\RequirePackage{xcolor}      % For \definecolor
\RequirePackage{enumitem}    % For \setlist
\RequirePackage{amsmath}     % For \numberwithin (often loaded by amsthm anyway)
\RequirePackage{amsthm}      % For \newtheoremstyle, proof environment customization
\RequirePackage{amssymb}     % For \varnothing, \mathbb (if used elsewhere)

\newcommand{\medium}{\fontsize{12}{14}\selectfont}
\newcommand{\mediuml}{\fontsize{14}{16}\selectfont}

% --- Colors ---
\definecolor{darkgreen}{HTML}{008000}
\definecolor{darkblue}{HTML}{000080}
\definecolor{darkred}{HTML}{800000}
\definecolor{darkcyan}{HTML}{007090}
\definecolor{bluegreen}{HTML}{17A589}
\definecolor{khaki}{HTML}{7D6608}

% --- Hyperref Setup ---
% Note: hyperref should ideally be loaded late in the main .tex preamble
\hypersetup{linkcolor=darkblue, urlcolor=darkred, citecolor=darkgreen}

% --- List Customization (using enumitem) ---
\setlist[enumerate,1]{label={\upshape\arabic*.}, ref={\upshape\arabic*}, leftmargin=5ex, labelwidth=5ex, labelsep=0ex, topsep=1ex, listparindent=1.5ex, itemsep=0.1ex, parsep=0.1ex, align=left}
\setlist[enumerate,2]{label={\upshape(\roman*)}, ref={\upshape(\roman*)}, leftmargin=4ex, labelwidth=4ex, labelsep=0ex, topsep=1ex, listparindent=1.5ex, itemsep=0.1ex, parsep=0.1ex, align=left}
\setlist[enumerate,3]{label={\upshape(\alph*)}, ref={\upshape(\alph*)}, leftmargin=5ex, labelwidth=5ex, labelsep=0ex, topsep=1ex, listparindent=1.5ex, itemsep=0.1ex, parsep=0.1ex, align=left}

% --- Numbering ---
\numberwithin{section}{chapter}
\numberwithin{equation}{chapter} % Requires amsmath

% --- Theorem Environment Styles (using amsthm) ---
\newtheoremstyle{dplplain}
{\topsep}   % ABOVESPACE
{\topsep}   % BELOWSPACE
{\slshape}  % BODYFONT
{\parindent}       % INDENT (empty value is the same as 0pt)
{\bfseries} % HEADFONT
{.}         % HEADPUNCT
{5pt plus 1pt minus 1pt} % HEADSPACE
{}          % CUSTOM-HEAD-SPEC

\newtheoremstyle{dpldefinition}
{\topsep}   % ABOVESPACE
{\topsep}   % BELOWSPACE
{\normalfont}  % BODYFONT
{\parindent}       % INDENT (empty value is the same as 0pt)
{\bfseries} % HEADFONT
{.}         % HEADPUNCT
{5pt plus 1pt minus 1pt} % HEADSPACE
{}          % CUSTOM-HEAD-SPEC

\newtheoremstyle{dplremark}
{\topsep}   % ABOVESPACE
{\topsep}   % BELOWSPACE
{\normalfont}  % BODYFONT
{\parindent}       % INDENT (empty value is the same as 0pt)
{\slshape} % HEADFONT
{.}         % HEADPUNCT
{5pt plus 1pt minus 1pt} % HEADSPACE
{}          % CUSTOM-HEAD-SPEC

% --- Proof Environment Customization (using amsthm) ---
\makeatletter
\renewenvironment{proof}[1][\proofname]{\par
\pushQED{\qed}%
\normalfont \topsep6\p@\@plus6\p@\relax
\trivlist
\item\relax
{\hspace{\parindent}\slshape % Changed from \itshape to \slshape for consistency? Or keep \itshape if preferred.
#1\@addpunct{.}}\hspace\labelsep\ignorespaces
}{%
\popQED\endtrivlist\@endpefalse
}
\makeatother

% --- Symbol Redefinition ---
\let\oldemptyset\emptyset
\let\emptyset\varnothing % Requires amssymb

% --- Sectioning Command Formatting ---
\makeatletter
% Add period after section numbers
\renewcommand{\@seccntformat}[1]{\csname the#1\endcsname.\quad}

% Redefine section/subsection/etc. appearance
\renewcommand\section{\@startsection {section}{1}{\parindent}%
{3.5ex \@plus 1ex \@minus .2ex}%
{2.3ex \@plus.2ex}%
{\normalfont\Large\bfseries}}
\renewcommand\subsection{\@startsection{subsection}{2}{\parindent}%
{3.25ex\@plus 1ex \@minus .2ex}%
{1.5ex \@plus .2ex}%
{\normalfont\large\bfseries}}
\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\parindent}%
{3.25ex\@plus 1ex \@minus .2ex}%
{-1.5ex \@plus .2ex}% % Note: Negative space before heading if not on new line
{\normalfont\normalsize\bfseries}}
\renewcommand\paragraph{\@startsection{paragraph}{4}{\parindent}%
{3.25ex \@plus1ex \@minus.2ex}%
{-1em}% % Note: Negative space before heading
{\normalfont\normalsize\bfseries}}
\renewcommand\subparagraph{\@startsection{subparagraph}{5}{\parindent}%
{3.25ex \@plus1ex \@minus .2ex}%
{-1em}% % Note: Negative space before heading
{\normalfont\normalsize\bfseries}}

% --- Chapter Heading Customization ---
\newlength{\myindent}
\setlength{\myindent}{\parindent} % Store current parindent

\renewcommand\chapter{%
    \if@openright\clearpage\else\clearpage\fi
    \thispagestyle{plain}% Page style for chapter start page
    \global\@topnum\z@
    \@afterindenttrue
    \secdef\@chapter\@schapter}

\def\@chapter[#1]#2{\ifnum
                        \c@secnumdepth >\m@ne
                        \if@mainmatter
                        \refstepcounter{chapter}%
                        \typeout{\@chapapp\space\thechapter.}%
                        \addcontentsline{toc}{chapter}%
                        {\protect\numberline{\thechapter}#2}%
\else
                        \addcontentsline{toc}{chapter}{#1}% % For frontmatter chapters
\fi
\else
\addcontentsline{toc}{chapter}{#1}%
\fi
\chaptermark{#1}% For headers, if using fancyhdr
\addtocontents{lof}{\protect\addvspace{10\p@}}% Add space in List of Figures
\addtocontents{lot}{\protect\addvspace{10\p@}}% Add space in List of Tables
\if@twocolumn
\@topnewpage[\@makechapterhead{#2}]%
\else
\@makechapterhead{#2}%
\@afterheading % Hook for things after heading
\fi}

\def\@makechapterhead#1{%
    \vspace*{15\p@}% Space before chapter head
    {\parindent\z@ \raggedright \normalfont % No indent, ragged right
        \ifnum
            \c@secnumdepth >\m@ne
            \if@mainmatter % Only for main matter chapters
            \hspace*{\myindent}% Indent chapter number line
            \huge\bfseries \@chapapp\space \thechapter % Chapter number
            \par\nobreak
            \vskip 10\p@ % Space between number and title
        \fi
        \fi
        \interlinepenalty\@M % Prevent page break within head
        \hspace*{18pt}% Indent chapter title line (adjust as needed)
        \huge \bfseries \parbox{0.9\textwidth}{\raggedright % Adjust width if needed
        #1}\par\nobreak % Chapter title
        \vskip 15\p@ % Space after chapter head
    }}

% For unnumbered chapters (like Bibliography)
\def\@schapter#1{\if@twocolumn
\@topnewpage[\@makeschapterhead{#1}]%
\else
\@makeschapterhead{#1}%
\@afterheading
\fi}

\def\@makeschapterhead#1{%
    \vspace*{15\p@}%
    {\parindent \z@ \raggedright % No indent, ragged right
    \normalfont
    \interlinepenalty\@M
    \hspace{\myindent}% Indent the title to align with numbered chapters' titles
    \huge \bfseries  #1\par\nobreak % Unnumbered chapter title
    \vskip 15\p@
    }}

% --- Table of Contents Numbering ---
% Add period after numbers in ToC/LoF/LoT
\let \savenumberline \numberline
\def \numberline#1{\savenumberline{#1.}}

\makeatother % Restore @ symbol behavior

% --- REMOVED FROM HERE ---
% \addto\captionsukrainian{\renewcommand{\bibname}{Список використаних джерел}}
% This MUST go in the main .tex file AFTER \usepackage[...]{babel}

% --- Commented out potentially problematic lines ---
% \def\ps@headings{% ... %} % Handled by fancyhdr in main file
% \renewcommand\normalsize\large % Base font size should be set via class option
% \normalsize % Redundant if base size is set correctly

\endinput % Good practice for style files

